# Database

## 목차

- [정규화](#정규화)
- [Transaction](#transaction)
- [JOIN](#join)

## 정규화

데이터 중복을 최소화하고 데이터 무결성을 보장하기 위해 구조화하는 과정

### 제1 정규형 

데이터의 **원자성** 보장. 하나의 기본키에 두개 이상의 값이 있으면 안된다. 

|유저 번호|닉네임|
|-|-|
|1|몽가, 파타우| 

이 테이블에는 하나의 유저 번호가, 몽가와 파타우라는 두개 닉네임이 있다. 이것을 분리해야한다

|유저 번호|닉네임|
|-|-|
|1|몽가|
|2|파타우

### 제2 정규형

기본키의 일부에 의존하는 **부분 종속성** 제거. 테이블을 **복합키 전체** 에 의존해야한다

|주문 ID|제품ID|고객명|제품명|
|-|-|-|-|
|1|A1|김철수|맥북|
|2|B1|김철수|에어팟 

주문ID, 제품ID 두개의 복합키로 구성된 테이블이다. 이 테이블에서 고객명은 주문ID, 제품ID 전체에 의존하지만 제품명은 그렇지 않다. 이 테이블은 두개의 테이블로 분리되어야 한다. 

|주문 ID|제품 ID|고객명|
|-|-|-|
|1|A1|김철수|
|2|B1|김철수|

|제품 ID|제품명|
|-|-|
|A1|맥북|
|B1|에어팟

### 제3 정규형

**이행 종속성**을 제거한다. 기본키가 아닌 다른 속성에 종속되는 관계를 말한다

|고객 ID|고객명|지역ID|지역명| 
|-|-|-|-|
|1|김철수|A|서울 관악구| 

여기서 기본키는 고객 ID 하나다. 그런데 서울 관악구는 고객 ID(기본키)가 아니라 다른 속성(지역 ID)에 의존하고 있다. 따라서 아래처럼 분리되어야 한다. 

|고객ID|고객명|지역ID| 
|-|-|-|
|1|김철수|A| 

|지역ID|지역명|
|-|-|
|A|서울 관악구

## Transaction 

ACID 특성 

* Atomicity: 모두 수행되거나, 모두 수행되지 않아야한다. 
* Consistency: 트랜잭션 수행 전후로 데이터베이스의 일관성이 유지되어야한다. 기본키, 외래키같은 제약 조건이 깨지면 안된다. 
* Isolation: 동시에 실행되는 트랜잭션이 서로의 중간 결과를 볼 수 없어야한다. 
* Durability: 트랜잭션이 성공 후 그 결과는 영구 저장되어야 한다. 

## JOIN

두 개 이상의 테이블을 연결하여 원하는 데이터를 조회하는 방법

### INNER JOIN
두 테이블에서 **조건에 일치하는 행만** 반환한다 (교집합).

### LEFT OUTER JOIN
**왼쪽 테이블의 모든 행**을 반환하고, 오른쪽에 일치하는 값이 없으면 NULL을 반환한다.

### RIGHT OUTER JOIN
**오른쪽 테이블의 모든 행**을 반환하고, 왼쪽에 일치하는 값이 없으면 NULL을 반환한다.

### FULL OUTER JOIN
두 테이블의 모든 행을 반환한다. 일치하지 않으면 NULL로 채운다 (합집합).

### CROSS JOIN
두 테이블의 모든 행을 곱집합(Cartesian Product)으로 반환한다.

### SELF JOIN
자기 자신과 JOIN을 수행한다. 계층 구조나 같은 테이블 내 관계 탐색에 유용하다.